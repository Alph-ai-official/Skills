# 交易 Skill 交互模板

本文件定义了 Claude 处理交易请求时的标准交互流程。

---

## 流程 1：用户要买入代币

### 触发词
"买"、"buy"、"购买"、"花 X 个 SOL/BNB/ETH 买"

### Step 1：收集必要信息

检查用户是否提供了以下信息，缺什么问什么：

| 信息 | 必须 | 示例 | 默认值 |
|------|------|------|--------|
| 合约地址 | 是 | `0x360a...4444` | 无 |
| 链 | 是 | sol / bsc / eth | 无 |
| 买入金额 | 是 | 0.1 SOL | 无 |
| 币种名称 | 否 | 黑马 | 从合约查询 |
| 滑点 | 否 | 27.5% | 27.5%（0.275） |
| 防夹子 | 否 | 开/关 | 开（true） |
| 优先费 | 否 | 0.2 | 0.2 |

**提问模板**（缺少信息时）：
```
需要以下信息才能下单：
- 合约地址：？
- 链：sol / bsc / eth？
- 买入金额：花多少主链币？
```

### Step 2：确认订单

展示订单摘要，等待用户确认：

```
即将执行买入：
  链：BSC
  买入：黑马（0x360a...4444）
  花费：0.001 BNB
  滑点：27.5%
  防夹子：开启

确认下单？（y/n）
```

### Step 3：执行下单

调用 `POST /smart-web-gateway/order/create`，参数按 SKILL.md 核心接口文档组装。

### Step 4：展示结果

成功时输出：
```
买入成功！

  订单ID：781328037879316480
  买入：16,710.32 黑马
  花费：0.001 BNB
  成交价：0.0000000598 BNB
  Gas 费：0.0000508 BNB
  手续费：0.00001 BNB（1%）
  交易哈希：0x9165d544...

  查看交易：https://bscscan.com/tx/0x9165d544...
```

失败时输出：
```
买入失败

  错误信息：<服务器返回的错误描述>
  建议：
  - 检查钱包余额是否充足
  - 尝试增大滑点（当前 27.5%）
  - 确认合约地址是否正确
```

---

## 流程 2：用户要卖出代币

### 触发词
"卖"、"sell"、"卖出"、"清仓"、"全卖"

### Step 1：收集必要信息

| 信息 | 必须 | 示例 | 默认值 |
|------|------|------|--------|
| 合约地址 | 是 | `0x360a...4444` | 无 |
| 链 | 是 | sol / bsc / eth | 无 |
| 卖出数量 | 是 | 16710（代币数量） | 无 |
| 币种名称 | 否 | 黑马 | 从合约查询 |
| 滑点 | 否 | 27.5% | 27.5%（0.275） |

### Step 2：确认订单

```
即将执行卖出：
  链：BSC
  卖出：16,710 黑马（0x360a...4444）
  换回：BNB
  滑点：27.5%
  防夹子：开启

确认下单？（y/n）
```

### Step 3 & 4：同买入流程

成功时输出：
```
卖出成功！

  订单ID：781330000000000000
  卖出：16,710 黑马
  获得：0.00098 BNB
  Gas 费：0.0000508 BNB
  交易哈希：0xabc123...

  查看交易：https://bscscan.com/tx/0xabc123...
```

---

## 流程 3：用户查询交易相关 API

### 触发词
"查询"、"接口"、"API"、"怎么调用"

### 处理方式
1. 在 `apis.json` 中搜索匹配的 API
2. 展示 API 路径、方法、参数表、响应格式
3. 如用户需要，生成 Python/JavaScript 调用代码

---

## 流程 4：用户查询订单

### 触发词
"订单"、"查订单"、"交易记录"、"历史"

### 处理方式
搜索 `apis.json` 中订单查询相关 API，展示接口文档。

---

## 区块浏览器链接

交易成功后，根据链拼接区块浏览器链接：

| 链 | 浏览器 URL |
|----|-----------|
| `bsc` | `https://bscscan.com/tx/{hash}` |
| `eth` | `https://etherscan.io/tx/{hash}` |
| `sol` | `https://solscan.io/tx/{hash}` |

---

## 安全提醒

每次下单前提醒：
- 交易不可逆，确认信息无误后再执行
- 大额交易建议先小额测试
- 注意滑点设置，过高可能被夹
